# HarmonySafeAgent è¯¦ç»†é˜¶æ®µæ€§å¼€å‘è®¡åˆ’ä¹¦ v2.0

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **é¡¹ç›®åç§°ï¼š** HarmonySafeAgent
- **é¡¹ç›®ç±»å‹ï¼š** Java CLI å®‰å…¨åˆ†æå·¥å…·
- **æ–‡æ¡£ç‰ˆæœ¬ï¼š** 2.0
- **åˆ¶å®šæ—¥æœŸï¼š** 2025-10-17
- **é¢„è®¡æ€»å·¥æœŸï¼š** 33-44å¤©ï¼ˆçº¦6-9å‘¨ï¼‰

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

### æ ¸å¿ƒç›®æ ‡

å¼€å‘ä¸€ä¸ªå‘½ä»¤è¡ŒAI Agentå·¥å…·ï¼Œç”¨äºè‡ªåŠ¨åˆ†æé¸¿è’™ç³»ç»ŸåŸºç¡€åº“ï¼ˆå¦‚bzip2ï¼‰çš„å®‰å…¨æ€§ï¼Œæä¾›æ¼æ´æ£€æµ‹ã€æ”¹è¿›å»ºè®®ç”Ÿæˆå’Œå®‰å…¨ä»£ç è¿ç§»åŠŸèƒ½ã€‚

### æ ¸å¿ƒä»·å€¼ä¸»å¼ 

1. **è‡ªåŠ¨åŒ–å®‰å…¨åˆ†æ**ï¼šç»“åˆé™æ€åˆ†æå·¥å…·ä¸AIèƒ½åŠ›ï¼Œè‡ªåŠ¨è¯†åˆ«ä»£ç å®‰å…¨é—®é¢˜
2. **æ™ºèƒ½æ”¹è¿›å»ºè®®**ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹æä¾›ä¸Šä¸‹æ–‡ç›¸å…³çš„ä¿®å¤å»ºè®®
3. **å®‰å…¨ä»£ç è¿ç§»**ï¼šè¾…åŠ©C/C++ä»£ç å‘Rustç­‰å†…å­˜å®‰å…¨è¯­è¨€è¿ç§»
4. **å¯è§†åŒ–æŠ¥å‘Š**ï¼šç”Ÿæˆä¸“ä¸šçš„å®‰å…¨åˆ†ææŠ¥å‘Š

### æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          CLIäº¤äº’å±‚ (Picocli)            â”‚
â”‚   å‘½ä»¤è§£æ â”‚ å‚æ•°éªŒè¯ â”‚ æ§åˆ¶å°è¾“å‡º      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æ ¸å¿ƒAgentå¼•æ“ (Javaæ¨¡å—)         â”‚
â”‚  â”œâ”€â”€ CodeParser (æ–‡ä»¶æ‰«æä¸è§£æ)        â”‚
â”‚  â”œâ”€â”€ SecurityAnalyzer (å®‰å…¨åˆ†æå¼•æ“)    â”‚
â”‚  â”œâ”€â”€ DecisionEngine (AIå†³ç­–å¼•æ“)        â”‚
â”‚  â”œâ”€â”€ CodeGenerator (ä»£ç ç”Ÿæˆå™¨)         â”‚
â”‚  â””â”€â”€ ReportGenerator (æŠ¥å‘Šç”Ÿæˆ)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AIæ¨ç†å±‚        â”‚  â”‚  å·¥å…·é“¾æ”¯æŒå±‚     â”‚
â”‚  OpenAI/DeepSeek â”‚  â”‚  Clang/Semgrep   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒåŠŸèƒ½å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | ä¼˜å…ˆçº§ |
|------|------|--------|
| `analyze` | æ‰«æå¹¶åˆ†æC/C++/Rustä»£ç å®‰å…¨é—®é¢˜ | P0 |
| `suggest` | è¾“å‡ºAIç”Ÿæˆçš„æ”¹è¿›å»ºè®®ä¸é£é™©è¯„ä¼° | P0 |
| `report` | è¾“å‡ºè¯¦ç»†çš„å®‰å…¨æŠ¥å‘Š | P1 |
| `refactor` | è‡ªåŠ¨ç”Ÿæˆæ”¹è¿›æˆ–Rustè¿ç§»å»ºè®® | P2 |
| `config` | é…ç½®APIå¯†é’¥ã€åˆ†æçº§åˆ«ç­‰å‚æ•° | P0 |

---

## ğŸ“Š éœ€æ±‚åˆ†æ

### åŠŸèƒ½éœ€æ±‚çŸ©é˜µ

| éœ€æ±‚ID | éœ€æ±‚æè¿° | ä¼˜å…ˆçº§ | å¤æ‚åº¦ | ä¾èµ– |
|--------|---------|--------|--------|------|
| FR-01 | CLIå‘½ä»¤æ¡†æ¶ä¸å‚æ•°è§£æ | P0 | â­â­ | æ—  |
| FR-02 | é…ç½®ç®¡ç†ä¸æŒä¹…åŒ– | P0 | â­â­ | FR-01 |
| FR-03 | ä»£ç æ–‡ä»¶æ‰«æä¸è¿‡æ»¤ | P0 | â­â­ | æ—  |
| FR-04 | Clangé™æ€åˆ†æé›†æˆ | P0 | â­â­â­â­ | FR-03 |
| FR-05 | Semgrepè§„åˆ™å¼•æ“é›†æˆ | P0 | â­â­â­ | FR-03 |
| FR-06 | å®‰å…¨é—®é¢˜åˆ†ç±»ä¸è¯„çº§ | P0 | â­â­â­ | FR-04, FR-05 |
| FR-07 | AI APIå®¢æˆ·ç«¯ï¼ˆOpenAI/DeepSeekï¼‰ | P0 | â­â­â­ | FR-02 |
| FR-08 | Promptå·¥ç¨‹ä¸ç»“æœè§£æ | P0 | â­â­â­ | FR-07 |
| FR-09 | æ··åˆåˆ†æå†³ç­–å¼•æ“ | P1 | â­â­â­â­ | FR-06, FR-08 |
| FR-10 | HTML/MarkdownæŠ¥å‘Šç”Ÿæˆ | P1 | â­â­ | FR-09 |
| FR-11 | Câ†’Rustè¿ç§»å»ºè®®ç”Ÿæˆ | P2 | â­â­â­â­â­ | FR-09 |
| FR-12 | å¹¶è¡Œåˆ†æä¸å¢é‡åˆ†æ | P2 | â­â­â­ | FR-06 |

### éåŠŸèƒ½éœ€æ±‚

| ç±»åˆ« | éœ€æ±‚ | æŒ‡æ ‡ |
|------|------|------|
| æ€§èƒ½ | åˆ†æé€Ÿåº¦ | 1000è¡Œä»£ç  < 10ç§’ |
| æ€§èƒ½ | å†…å­˜ä½¿ç”¨ | < 512MB |
| å¯ç”¨æ€§ | CLIå“åº”æ—¶é—´ | < 200ms |
| å¯é æ€§ | AI APIæˆåŠŸç‡ | > 95% |
| å¯ç»´æŠ¤æ€§ | å•å…ƒæµ‹è¯•è¦†ç›–ç‡ | > 80% |
| å®‰å…¨æ€§ | APIå¯†é’¥åŠ å¯†å­˜å‚¨ | AES-256 |
| å…¼å®¹æ€§ | è·¨å¹³å°æ”¯æŒ | Windows/Linux/macOS |

---

## ğŸš€ è¯¦ç»†é˜¶æ®µæ€§å¼€å‘è®¡åˆ’

### æ€»ä½“æ—¶é—´çº¿

```
é˜¶æ®µ0: é¡¹ç›®åˆå§‹åŒ–          [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 2-3å¤©
é˜¶æ®µ1: CLIæ¡†æ¶ä¸é…ç½®       [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 4-5å¤©
é˜¶æ®µ2: é™æ€åˆ†æå¼•æ“        [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 6-8å¤©
é˜¶æ®µ3: AIå¢å¼ºåˆ†æ          [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘] 5-7å¤©
é˜¶æ®µ4: ä»£ç ç”Ÿæˆä¸é‡æ„      [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘] 7-10å¤© (å¯é™çº§)
é˜¶æ®µ5: æŠ¥å‘Šç”Ÿæˆä¸å¯è§†åŒ–    [â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘] 3-4å¤©
é˜¶æ®µ6: æ€§èƒ½ä¼˜åŒ–ä¸æµ‹è¯•      [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 4-5å¤©
é˜¶æ®µ7: å®¹å™¨åŒ–ä¸éƒ¨ç½²        [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 2-3å¤©
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡: 33-44å¤© (6-9å‘¨)
```

---

### ğŸ“Œ é˜¶æ®µ0ï¼šé¡¹ç›®åˆå§‹åŒ–ä¸ç¯å¢ƒå‡†å¤‡

**â± æ—¶é—´ä¼°ç®—ï¼š** 2-3å¤©
**ğŸ¯ ç›®æ ‡ï¼š** æ­å»ºé¡¹ç›®éª¨æ¶ï¼Œé…ç½®å¼€å‘ç¯å¢ƒï¼ŒéªŒè¯æŠ€æœ¯æ ˆå¯è¡Œæ€§

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ID | ä»»åŠ¡æè¿° | å·¥æ—¶ | è´Ÿè´£æ¨¡å— |
|--------|---------|------|---------|
| T0.1 | åˆ›å»ºMavené¡¹ç›®ç»“æ„ | 0.5å¤© | é¡¹ç›®æ¡†æ¶ |
| T0.2 | é…ç½®POM.xmlä¾èµ– | 0.5å¤© | ä¾èµ–ç®¡ç† |
| T0.3 | å¼€å‘ç¯å¢ƒé…ç½®ï¼ˆJava 17, Clang, Semgrepï¼‰ | 1å¤© | ç¯å¢ƒé…ç½® |
| T0.4 | æŠ€æœ¯éªŒè¯POCï¼ˆPicocli, Clangè°ƒç”¨, AI APIï¼‰ | 1å¤© | æŠ€æœ¯éªŒè¯ |

#### æŠ€æœ¯æ–¹æ¡ˆ

**é¡¹ç›®ç»“æ„ï¼š**
```
HarmonySafeAgent/
â”œâ”€â”€ pom.xml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/harmony/agent/
â”‚   â”‚   â”‚       â”œâ”€â”€ Main.java
â”‚   â”‚   â”‚       â”œâ”€â”€ cli/          (CLIæ¨¡å—)
â”‚   â”‚   â”‚       â”œâ”€â”€ core/         (æ ¸å¿ƒå¼•æ“)
â”‚   â”‚   â”‚       â”œâ”€â”€ ai/           (AIæ¨¡å—)
â”‚   â”‚   â”‚       â”œâ”€â”€ utils/        (å·¥å…·ç±»)
â”‚   â”‚   â”‚       â””â”€â”€ config/       (é…ç½®ç®¡ç†)
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ templates/        (æŠ¥å‘Šæ¨¡æ¿)
â”‚   â”‚       â”œâ”€â”€ rules/            (Semgrepè§„åˆ™)
â”‚   â”‚       â””â”€â”€ application.yml
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/
â”œâ”€â”€ docs/                          (æ–‡æ¡£)
â”œâ”€â”€ scripts/                       (æ„å»ºè„šæœ¬)
â””â”€â”€ README.md
```

**æ ¸å¿ƒä¾èµ–ï¼ˆPOM.xmlï¼‰ï¼š**
```xml
<dependencies>
    <!-- CLIæ¡†æ¶ -->
    <dependency>
        <groupId>info.picocli</groupId>
        <artifactId>picocli</artifactId>
        <version>4.7.5</version>
    </dependency>

    <!-- HTTPå®¢æˆ·ç«¯ -->
    <dependency>
        <groupId>com.squareup.okhttp3</groupId>
        <artifactId>okhttp</artifactId>
        <version>4.12.0</version>
    </dependency>

    <!-- JSONå¤„ç† -->
    <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>2.10.1</version>
    </dependency>

    <!-- æ—¥å¿— -->
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.4.14</version>
    </dependency>

    <!-- æµ‹è¯• -->
    <dependency>
        <groupId>org.junit.jupiter</groupId>
        <artifactId>junit-jupiter</artifactId>
        <version>5.10.1</version>
        <scope>test</scope>
    </dependency>
</dependencies>
```

#### äº¤ä»˜ç‰©

- âœ… å¯è¿è¡Œçš„Mavené¡¹ç›®éª¨æ¶
- âœ… åŸºç¡€CLIå‘½ä»¤æ¡†æ¶ï¼ˆ`--help`, `--version`ï¼‰
- âœ… ç¯å¢ƒé…ç½®æ–‡æ¡£ï¼ˆ`docs/setup.md`ï¼‰
- âœ… POCéªŒè¯æŠ¥å‘Š

#### éªŒæ”¶æ ‡å‡†

- [ ] `mvn clean package` æˆåŠŸæ„å»ºJARåŒ…
- [ ] `java -jar target/harmony-agent.jar --help` æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- [ ] Clangåœ¨å‘½ä»¤è¡Œå¯è°ƒç”¨ï¼š`clang --version`
- [ ] Semgrepåœ¨å‘½ä»¤è¡Œå¯è°ƒç”¨ï¼š`semgrep --version`
- [ ] OpenAI APIæµ‹è¯•è°ƒç”¨æˆåŠŸ

#### é£é™©ä¸ä¾èµ–

- **ä¾èµ–ï¼š** æ— 
- **é£é™©ï¼š** å·¥å…·å®‰è£…å¤±è´¥ â†’ ç¼“è§£ï¼šæä¾›Dockeræ–¹æ¡ˆ

---

### ğŸ“Œ é˜¶æ®µ1ï¼šCLIæ¡†æ¶ä¸é…ç½®æ¨¡å—

**â± æ—¶é—´ä¼°ç®—ï¼š** 4-5å¤©
**ğŸ¯ ç›®æ ‡ï¼š** å®ç°å®Œæ•´çš„CLIäº¤äº’æ¡†æ¶å’Œé…ç½®ç®¡ç†ç³»ç»Ÿ

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ID | ä»»åŠ¡æè¿° | å·¥æ—¶ | ä¾èµ– |
|--------|---------|------|------|
| T1.1 | å®ç°5ä¸ªæ ¸å¿ƒå‘½ä»¤ç»“æ„ | 1.5å¤© | T0.4 |
| T1.2 | é…ç½®æ–‡ä»¶åŠ è½½ä¸æŒä¹…åŒ– | 1å¤© | - |
| T1.3 | APIå¯†é’¥åŠ å¯†å­˜å‚¨ | 0.5å¤© | T1.2 |
| T1.4 | æ§åˆ¶å°è¾“å‡ºä¼˜åŒ–ï¼ˆå½©è‰²ã€è¿›åº¦æ¡ï¼‰ | 1å¤© | T1.1 |
| T1.5 | å•å…ƒæµ‹è¯•ç¼–å†™ | 1å¤© | T1.1-T1.4 |

#### æŠ€æœ¯æ–¹æ¡ˆ

**å‘½ä»¤ç»“æ„å®ç°ï¼š**
```java
@Command(name = "harmony-agent",
         mixinStandardHelpOptions = true,
         version = "1.0.0",
         description = "OpenHarmonyå®‰å…¨åˆ†æå·¥å…·")
public class HarmonyAgentCLI implements Runnable {

    @Command(name = "analyze", description = "åˆ†ææºç å®‰å…¨é—®é¢˜")
    public int analyze(
        @Parameters(description = "æºç è·¯å¾„") String sourcePath,
        @Option(names = {"-l", "--level"}, defaultValue = "standard",
                description = "åˆ†æçº§åˆ«: quick|standard|deep") String level,
        @Option(names = {"-o", "--output"}, description = "è¾“å‡ºæ–‡ä»¶è·¯å¾„") String output
    ) {
        try {
            AnalysisConfig config = new AnalysisConfig(level);
            AnalysisResult result = analysisService.analyze(sourcePath, config);

            if (output != null) {
                reportGenerator.save(result, output);
            } else {
                consolePrinter.print(result);
            }

            return 0;
        } catch (Exception e) {
            logger.error("åˆ†æå¤±è´¥", e);
            return 1;
        }
    }

    @Command(name = "config", description = "é…ç½®ç®¡ç†")
    public int config(
        @Parameters(index = "0", description = "æ“ä½œ: set|get|list") String action,
        @Parameters(index = "1", arity = "0..1", description = "é…ç½®é”®") String key,
        @Parameters(index = "2", arity = "0..1", description = "é…ç½®å€¼") String value
    ) {
        ConfigManager configManager = ConfigManager.getInstance();

        switch (action) {
            case "set":
                configManager.set(key, value);
                System.out.println("âœ… é…ç½®å·²ä¿å­˜: " + key);
                break;
            case "get":
                String val = configManager.get(key);
                System.out.println(key + " = " + val);
                break;
            case "list":
                configManager.list().forEach((k, v) ->
                    System.out.println(k + " = " + maskSensitive(k, v)));
                break;
        }
        return 0;
    }
}
```

**é…ç½®æ–‡ä»¶æ ¼å¼ï¼ˆYAMLï¼‰ï¼š**
```yaml
# ~/.harmony-agent/config.yml
ai:
  provider: openai  # openai | deepseek | claude
  api_key: ${OPENAI_API_KEY}  # æ”¯æŒç¯å¢ƒå˜é‡
  model: gpt-4-turbo
  max_tokens: 4096
  temperature: 0.3

analysis:
  level: deep  # quick | standard | deep
  parallel: true
  max_threads: 4
  incremental: false

tools:
  clang_path: /usr/bin/clang
  semgrep_path: /usr/local/bin/semgrep
  rust_path: /usr/bin/rustc

output:
  format: html  # markdown | html | json
  verbose: true
  color: true

cache:
  enabled: true
  ttl: 3600  # ç§’
  max_size: 100  # MB
```

**APIå¯†é’¥åŠ å¯†å­˜å‚¨ï¼š**
```java
public class SecureConfigManager {

    private static final String ALGORITHM = "AES/GCM/NoPadding";
    private static final int KEY_SIZE = 256;

    public void saveApiKey(String apiKey) throws Exception {
        // ä»ç”¨æˆ·åæ´¾ç”Ÿå¯†é’¥
        SecretKey key = deriveKey(System.getProperty("user.name"));

        // åŠ å¯†
        Cipher cipher = Cipher.getInstance(ALGORITHM);
        cipher.init(Cipher.ENCRYPT_MODE, key);
        byte[] encrypted = cipher.doFinal(apiKey.getBytes(StandardCharsets.UTF_8));

        // ä¿å­˜
        Path configPath = getConfigPath();
        Files.write(configPath, encrypted);

        // è®¾ç½®æ–‡ä»¶æƒé™ï¼ˆä»…æ‰€æœ‰è€…å¯è¯»å†™ï¼‰
        if (!System.getProperty("os.name").toLowerCase().contains("win")) {
            Files.setPosixFilePermissions(configPath,
                PosixFilePermissions.fromString("rw-------"));
        }
    }

    public String loadApiKey() throws Exception {
        SecretKey key = deriveKey(System.getProperty("user.name"));

        Cipher cipher = Cipher.getInstance(ALGORITHM);
        cipher.init(Cipher.DECRYPT_MODE, key);

        byte[] encrypted = Files.readAllBytes(getConfigPath());
        byte[] decrypted = cipher.doFinal(encrypted);

        return new String(decrypted, StandardCharsets.UTF_8);
    }

    private SecretKey deriveKey(String password) throws Exception {
        SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA256");
        KeySpec spec = new PBEKeySpec(password.toCharArray(), getSalt(), 65536, KEY_SIZE);
        SecretKey tmp = factory.generateSecret(spec);
        return new SecretKeySpec(tmp.getEncoded(), "AES");
    }
}
```

**æ§åˆ¶å°è¾“å‡ºä¼˜åŒ–ï¼š**
```java
public class ConsolePrinter {

    private static final String ANSI_RESET = "\u001B[0m";
    private static final String ANSI_RED = "\u001B[31m";
    private static final String ANSI_GREEN = "\u001B[32m";
    private static final String ANSI_YELLOW = "\u001B[33m";

    public void printIssue(Issue issue) {
        String color = switch (issue.getSeverity()) {
            case CRITICAL -> ANSI_RED;
            case HIGH -> ANSI_YELLOW;
            default -> ANSI_RESET;
        };

        System.out.printf("%s%s %s [%s]%s%n",
            color,
            getSeverityIcon(issue.getSeverity()),
            issue.getTitle(),
            issue.getFile() + ":" + issue.getLine(),
            ANSI_RESET
        );
    }

    public void printProgressBar(int current, int total, String task) {
        int percent = (current * 100) / total;
        int completed = percent / 2;

        StringBuilder bar = new StringBuilder("[");
        for (int i = 0; i < 50; i++) {
            bar.append(i < completed ? "â–ˆ" : "â–‘");
        }
        bar.append("] ").append(percent).append("% - ").append(task);

        System.out.print("\r" + bar);
        if (current == total) {
            System.out.println();
        }
    }
}
```

#### äº¤ä»˜ç‰©

- âœ… å®Œæ•´çš„CLIå‘½ä»¤æ¡†æ¶ï¼ˆ5ä¸ªå‘½ä»¤ï¼‰
- âœ… ConfigManager.javaï¼ˆé…ç½®ç®¡ç†æ¨¡å—ï¼‰
- âœ… SecureConfigManager.javaï¼ˆåŠ å¯†å­˜å‚¨ï¼‰
- âœ… ConsolePrinter.javaï¼ˆæ§åˆ¶å°è¾“å‡ºï¼‰
- âœ… å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡ > 80%ï¼‰

#### éªŒæ”¶æ ‡å‡†

- [ ] æ‰€æœ‰å‘½ä»¤å¯æ‰§è¡Œä¸”å‚æ•°æ­£ç¡®è§£æ
- [ ] `config set openai.key=xxx` åŠ å¯†ä¿å­˜æˆåŠŸ
- [ ] `config get openai.key` æ­£ç¡®è§£å¯†è¿”å›ï¼ˆè„±æ•æ˜¾ç¤ºï¼‰
- [ ] å½©è‰²è¾“å‡ºåœ¨æ”¯æŒçš„ç»ˆç«¯æ­£å¸¸æ˜¾ç¤º
- [ ] è¿›åº¦æ¡æ­£å¸¸å·¥ä½œ
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%

#### é£é™©ä¸ä¾èµ–

- **ä¾èµ–ï¼š** é˜¶æ®µ0å®Œæˆ
- **é£é™©ï¼š** Windowsæ–‡ä»¶æƒé™è®¾ç½® â†’ ç¼“è§£ï¼šä½¿ç”¨æ–‡ä»¶å±æ€§API

---

### ğŸ“Œ é˜¶æ®µ2ï¼šé™æ€åˆ†æå¼•æ“

**â± æ—¶é—´ä¼°ç®—ï¼š** 6-8å¤©
**ğŸ¯ ç›®æ ‡ï¼š** é›†æˆClangå’ŒSemgrepï¼Œå®ç°åŸºç¡€å®‰å…¨åˆ†æèƒ½åŠ›

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ID | ä»»åŠ¡æè¿° | å·¥æ—¶ | ä¾èµ– |
|--------|---------|------|------|
| T2.1 | ä»£ç æ–‡ä»¶æ‰«æå™¨å®ç° | 1å¤© | - |
| T2.2 | Clangé™æ€åˆ†æé›†æˆ | 2å¤© | T2.1 |
| T2.3 | Semgrepè§„åˆ™å¼•æ“é›†æˆ | 1.5å¤© | T2.1 |
| T2.4 | è‡ªå®šä¹‰Semgrepè§„åˆ™ç¼–å†™ | 1å¤© | T2.3 |
| T2.5 | å®‰å…¨é—®é¢˜åˆ†ç±»ä¸è¯„çº§ | 1.5å¤© | T2.2, T2.3 |
| T2.6 | é›†æˆæµ‹è¯• | 1å¤© | T2.1-T2.5 |

#### æŠ€æœ¯æ–¹æ¡ˆ

**ä»£ç æ‰«æå™¨ï¼š**
```java
public class CodeParser {

    private static final Set<String> SUPPORTED_EXTENSIONS = Set.of(
        ".c", ".cpp", ".cc", ".h", ".hpp", ".rs"
    );

    private static final Set<String> IGNORE_PATTERNS = Set.of(
        "**/node_modules/**",
        "**/build/**",
        "**/dist/**",
        "**/target/**",
        "**/.git/**"
    );

    public List<SourceFile> scanDirectory(String path) throws IOException {
        PathMatcher ignoreMatcher = createIgnoreMatcher();

        return Files.walk(Paths.get(path))
            .parallel()
            .filter(Files::isRegularFile)
            .filter(p -> !ignoreMatcher.matches(p))
            .filter(this::isSupportedFile)
            .map(this::toSourceFile)
            .collect(Collectors.toList());
    }

    private boolean isSupportedFile(Path path) {
        String fileName = path.getFileName().toString();
        return SUPPORTED_EXTENSIONS.stream()
            .anyMatch(fileName::endsWith);
    }
}
```

**Clangé›†æˆï¼š**
```java
public class ClangAnalyzer {

    private final String clangPath;

    public AnalysisResult analyze(List<SourceFile> files) throws Exception {
        List<Issue> issues = new ArrayList<>();

        for (SourceFile file : files) {
            // æ„å»ºClangå‘½ä»¤
            ProcessBuilder pb = new ProcessBuilder(
                clangPath,
                "--analyze",
                "-Xclang", "-analyzer-output=json",
                "-Xclang", "-analyzer-checker=core,unix,security",
                file.getPath()
            );

            Process process = pb.start();
            String output = readOutput(process);
            int exitCode = process.waitFor();

            if (exitCode == 0 || exitCode == 1) {  // Clangè¿”å›1è¡¨ç¤ºå‘ç°é—®é¢˜
                List<Issue> fileIssues = parseClangOutput(output, file);
                issues.addAll(fileIssues);
            } else {
                logger.warn("Clangåˆ†æå¤±è´¥: " + file.getPath());
            }
        }

        return new AnalysisResult(issues);
    }

    private List<Issue> parseClangOutput(String json, SourceFile file) {
        // è§£æClang JSONè¾“å‡º
        JsonObject root = JsonParser.parseString(json).getAsJsonObject();
        JsonArray diagnostics = root.getAsJsonArray("diagnostics");

        List<Issue> issues = new ArrayList<>();
        for (JsonElement elem : diagnostics) {
            JsonObject diag = elem.getAsJsonObject();

            Issue issue = Issue.builder()
                .type(diag.get("category").getAsString())
                .title(diag.get("description").getAsString())
                .file(file.getPath())
                .line(diag.get("line").getAsInt())
                .severity(mapSeverity(diag.get("level").getAsString()))
                .source("clang")
                .build();

            issues.add(issue);
        }

        return issues;
    }
}
```

**Semgrepé›†æˆï¼š**
```java
public class SemgrepAnalyzer {

    private final String semgrepPath;
    private final Path rulesDir;

    public AnalysisResult analyze(String sourcePath) throws Exception {
        // æ„å»ºSemgrepå‘½ä»¤
        ProcessBuilder pb = new ProcessBuilder(
            semgrepPath,
            "--config", rulesDir.toString(),
            "--json",
            "--quiet",
            sourcePath
        );

        Process process = pb.start();
        String output = readOutput(process);
        int exitCode = process.waitFor();

        if (exitCode != 0 && exitCode != 1) {
            throw new AnalysisException("Semgrepæ‰§è¡Œå¤±è´¥: " + exitCode);
        }

        return parseSemgrepOutput(output);
    }

    private AnalysisResult parseSemgrepOutput(String json) {
        JsonObject root = JsonParser.parseString(json).getAsJsonObject();
        JsonArray results = root.getAsJsonArray("results");

        List<Issue> issues = new ArrayList<>();
        for (JsonElement elem : results) {
            JsonObject result = elem.getAsJsonObject();

            Issue issue = Issue.builder()
                .type(result.get("check_id").getAsString())
                .title(result.getAsJsonObject("extra").get("message").getAsString())
                .file(result.get("path").getAsString())
                .line(result.get("start").getAsJsonObject().get("line").getAsInt())
                .severity(mapSeverity(result.getAsJsonObject("extra").get("severity").getAsString()))
                .source("semgrep")
                .code(result.getAsJsonObject("extra").get("lines").getAsString())
                .build();

            issues.add(issue);
        }

        return new AnalysisResult(issues);
    }
}
```

**è‡ªå®šä¹‰Semgrepè§„åˆ™ï¼š**
```yaml
# rules/memory-safety.yml
rules:
  - id: unsafe-strcpy
    pattern: strcpy($DST, $SRC)
    message: "strcpyå¯èƒ½å¯¼è‡´ç¼“å†²åŒºæº¢å‡ºï¼Œå»ºè®®ä½¿ç”¨strncpyæˆ–snprintf"
    severity: ERROR
    languages: [c, cpp]
    metadata:
      category: memory-safety
      cwe: CWE-120

  - id: unsafe-gets
    pattern: gets($BUF)
    message: "getså‡½æ•°ä¸æ£€æŸ¥ç¼“å†²åŒºè¾¹ç•Œï¼Œå·²åºŸå¼ƒï¼Œä½¿ç”¨fgetsæ›¿ä»£"
    severity: ERROR
    languages: [c, cpp]

  - id: memory-leak
    patterns:
      - pattern: $PTR = malloc(...)
      - pattern-not: free($PTR)
    message: "æ½œåœ¨çš„å†…å­˜æ³„æ¼ï¼šåˆ†é…åæœªé‡Šæ”¾"
    severity: WARNING
    languages: [c, cpp]

  - id: null-deref
    patterns:
      - pattern: $PTR = $FUNC(...)
      - pattern-not: if ($PTR == NULL) { ... }
      - pattern: *$PTR
    message: "æ½œåœ¨çš„ç©ºæŒ‡é’ˆè§£å¼•ç”¨"
    severity: ERROR
    languages: [c, cpp]
```

**å®‰å…¨åˆ†æå¼•æ“ï¼š**
```java
public class SecurityAnalyzer {

    private final ClangAnalyzer clangAnalyzer;
    private final SemgrepAnalyzer semgrepAnalyzer;
    private final ExecutorService executor;

    public AnalysisResult analyze(String sourcePath, AnalysisConfig config) {
        List<Future<AnalysisResult>> futures = new ArrayList<>();

        // å¹¶è¡Œæ‰§è¡Œåˆ†æ
        futures.add(executor.submit(() -> clangAnalyzer.analyze(sourcePath)));
        futures.add(executor.submit(() -> semgrepAnalyzer.analyze(sourcePath)));

        // èšåˆç»“æœ
        List<Issue> allIssues = new ArrayList<>();
        for (Future<AnalysisResult> future : futures) {
            try {
                AnalysisResult result = future.get(60, TimeUnit.SECONDS);
                allIssues.addAll(result.getIssues());
            } catch (Exception e) {
                logger.error("åˆ†æä»»åŠ¡å¤±è´¥", e);
            }
        }

        // å»é‡
        allIssues = deduplicateIssues(allIssues);

        // åˆ†ç±»ä¸è¯„çº§
        Map<String, List<Issue>> categorized = categorizeIssues(allIssues);

        return AnalysisResult.builder()
            .issues(allIssues)
            .categorized(categorized)
            .statistics(computeStatistics(allIssues))
            .build();
    }

    private Map<String, List<Issue>> categorizeIssues(List<Issue> issues) {
        return issues.stream().collect(Collectors.groupingBy(issue -> {
            // åˆ†ç±»é€»è¾‘
            if (issue.getType().contains("memory")) return "å†…å­˜å®‰å…¨";
            if (issue.getType().contains("buffer")) return "ç¼“å†²åŒºå®‰å…¨";
            if (issue.getType().contains("null")) return "ç©ºæŒ‡é’ˆ";
            if (issue.getType().contains("leak")) return "èµ„æºæ³„æ¼";
            return "å…¶ä»–";
        }));
    }
}
```

#### äº¤ä»˜ç‰©

- âœ… CodeParser.javaï¼ˆæ–‡ä»¶æ‰«ææ¨¡å—ï¼‰
- âœ… ClangAnalyzer.javaï¼ˆClangé›†æˆï¼‰
- âœ… SemgrepAnalyzer.javaï¼ˆSemgrepé›†æˆï¼‰
- âœ… SecurityAnalyzer.javaï¼ˆåˆ†æå¼•æ“ï¼‰
- âœ… 10+æ¡è‡ªå®šä¹‰Semgrepè§„åˆ™
- âœ… é›†æˆæµ‹è¯•ç”¨ä¾‹

#### éªŒæ”¶æ ‡å‡†

- [ ] æˆåŠŸåˆ†æbzip2æºç å¹¶è¯†åˆ« > 20ä¸ªé—®é¢˜
- [ ] Clangå’ŒSemgrepè¾“å‡ºæ­£ç¡®è§£æ
- [ ] é—®é¢˜å»é‡å‡†ç¡®
- [ ] é—®é¢˜åˆ†ç±»å‡†ç¡®ç‡ > 85%
- [ ] åˆ†ææ€§èƒ½ï¼š1000è¡Œä»£ç  < 10ç§’
- [ ] å¹¶è¡Œåˆ†ææ­£å¸¸å·¥ä½œ

#### é£é™©ä¸ä¾èµ–

- **ä¾èµ–ï¼š** é˜¶æ®µ1å®Œæˆ
- **é£é™©ï¼š** Clang/Semgrepç‰ˆæœ¬å…¼å®¹æ€§ â†’ ç¼“è§£ï¼šç‰ˆæœ¬æ£€æµ‹ + é€‚é…å™¨æ¨¡å¼

---

### ğŸ“Œ é˜¶æ®µ3ï¼šAIå¢å¼ºåˆ†æ

**â± æ—¶é—´ä¼°ç®—ï¼š** 5-7å¤©
**ğŸ¯ ç›®æ ‡ï¼š** é›†æˆå¤§è¯­è¨€æ¨¡å‹ï¼Œå®ç°æ™ºèƒ½åˆ†æå’Œå»ºè®®ç”Ÿæˆ

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ID | ä»»åŠ¡æè¿° | å·¥æ—¶ | ä¾èµ– |
|--------|---------|------|------|
| T3.1 | LLMå®¢æˆ·ç«¯å®ç°ï¼ˆOpenAI/DeepSeekï¼‰ | 2å¤© | T1.2 |
| T3.2 | Promptå·¥ç¨‹ä¸æ¨¡æ¿è®¾è®¡ | 2å¤© | T2.6 |
| T3.3 | AIç»“æœè§£æä¸ç»“æ„åŒ– | 1å¤© | T3.1 |
| T3.4 | æ··åˆåˆ†æå†³ç­–å¼•æ“ | 1.5å¤© | T3.2, T3.3 |
| T3.5 | ç¼“å­˜ä¸é‡è¯•æœºåˆ¶ | 0.5å¤© | T3.1 |

#### æŠ€æœ¯æ–¹æ¡ˆ

**LLMå®¢æˆ·ç«¯ï¼š**
```java
public class LlmClient {

    private final OkHttpClient httpClient;
    private final String apiKey;
    private final String baseUrl;
    private final String model;

    public LlmResponse analyze(String prompt) throws IOException {
        JsonObject requestBody = new JsonObject();
        requestBody.addProperty("model", model);

        JsonArray messages = new JsonArray();
        JsonObject message = new JsonObject();
        message.addProperty("role", "user");
        message.addProperty("content", prompt);
        messages.add(message);

        requestBody.add("messages", messages);
        requestBody.addProperty("temperature", 0.3);
        requestBody.addProperty("max_tokens", 4096);

        // ç»“æ„åŒ–è¾“å‡º
        JsonObject responseFormat = new JsonObject();
        responseFormat.addProperty("type", "json_object");
        requestBody.add("response_format", responseFormat);

        Request request = new Request.Builder()
            .url(baseUrl + "/chat/completions")
            .header("Authorization", "Bearer " + apiKey)
            .header("Content-Type", "application/json")
            .post(RequestBody.create(
                requestBody.toString(),
                MediaType.get("application/json")
            ))
            .build();

        try (Response response = httpClient.newCall(request).execute()) {
            if (!response.isSuccessful()) {
                throw new IOException("APIè°ƒç”¨å¤±è´¥: " + response.code());
            }

            String responseBody = response.body().string();
            return ResponseParser.parse(responseBody);
        }
    }
}
```

**Promptæ¨¡æ¿ï¼š**
```java
public class PromptBuilder {

    public static String buildAnalysisPrompt(SourceFile file, List<Issue> staticIssues) {
        StringBuilder prompt = new StringBuilder();

        prompt.append("ä½ æ˜¯ä¸€ä½C/C++å®‰å…¨ä¸“å®¶ã€‚è¯·åˆ†æä»¥ä¸‹ä»£ç çš„å®‰å…¨é—®é¢˜ã€‚\n\n");

        prompt.append("## ä»£ç æ–‡ä»¶ï¼š").append(file.getName()).append("\n");
        prompt.append("```c\n");
        prompt.append(file.getContent()).append("\n");
        prompt.append("```\n\n");

        prompt.append("## é™æ€åˆ†æå·¥å…·å‘ç°çš„é—®é¢˜ï¼š\n");
        for (Issue issue : staticIssues) {
            prompt.append(String.format("- [%s] %s (è¡Œ%d)\n",
                issue.getSeverity(), issue.getTitle(), issue.getLine()));
        }

        prompt.append("\nè¯·æä¾›ä»¥ä¸‹åˆ†æï¼ˆä»¥JSONæ ¼å¼è¿”å›ï¼‰ï¼š\n");
        prompt.append("```json\n");
        prompt.append("{\n");
        prompt.append("  \"issues\": [\n");
        prompt.append("    {\n");
        prompt.append("      \"line\": <è¡Œå·>,\n");
        prompt.append("      \"severity\": \"Critical|High|Medium|Low\",\n");
        prompt.append("      \"category\": \"å†…å­˜å®‰å…¨|ç¼“å†²åŒºæº¢å‡º|ç©ºæŒ‡é’ˆ|èµ„æºæ³„æ¼ç­‰\",\n");
        prompt.append("      \"description\": \"è¯¦ç»†è¯´æ˜\",\n");
        prompt.append("      \"impact\": \"å®‰å…¨å½±å“åˆ†æ\",\n");
        prompt.append("      \"suggestion\": \"ä¿®å¤å»ºè®®\",\n");
        prompt.append("      \"code_fix\": \"ä¿®å¤åçš„ä»£ç ç¤ºä¾‹\"\n");
        prompt.append("    }\n");
        prompt.append("  ],\n");
        prompt.append("  \"overall_assessment\": \"æ•´ä½“å®‰å…¨è¯„ä¼°\",\n");
        prompt.append("  \"rust_migration_recommended\": true/false,\n");
        prompt.append("  \"rust_migration_reason\": \"è¿ç§»ç†ç”±\"\n");
        prompt.append("}\n");
        prompt.append("```\n");

        return prompt.toString();
    }

    public static String buildSuggestionPrompt(Issue issue, String codeContext) {
        return String.format("""
            ä½ æ˜¯ä¸€ä½å®‰å…¨ä»£ç é‡æ„ä¸“å®¶ã€‚

            ## é—®é¢˜ï¼š
            ç±»å‹ï¼š%s
            æè¿°ï¼š%s
            ä¸¥é‡æ€§ï¼š%s

            ## é—®é¢˜ä»£ç ä¸Šä¸‹æ–‡ï¼š
            ```c
            %s
            ```

            è¯·æä¾›ï¼š
            1. è¯¦ç»†çš„å®‰å…¨é£é™©åˆ†æ
            2. ä¸ºä»€ä¹ˆè¿™æ˜¯ä¸€ä¸ªé—®é¢˜
            3. ä¿®å¤åçš„ä»£ç ï¼ˆåŒ…å«æ³¨é‡Šè¯´æ˜ï¼‰
            4. å¦‚ä½•éªŒè¯ä¿®å¤æœ‰æ•ˆ
            5. æ˜¯å¦å»ºè®®è¿ç§»åˆ°Rustï¼ˆå¦‚æœæ˜¯ï¼Œæä¾›åŸå› ï¼‰

            ä»¥JSONæ ¼å¼è¿”å›ã€‚
            """,
            issue.getType(),
            issue.getTitle(),
            issue.getSeverity(),
            codeContext
        );
    }
}
```

**å“åº”è§£æå™¨ï¼š**
```java
public class ResponseParser {

    private static final Gson gson = new GsonBuilder()
        .setPrettyPrinting()
        .create();

    public static LlmResponse parse(String responseBody) {
        JsonObject root = JsonParser.parseString(responseBody).getAsJsonObject();
        JsonArray choices = root.getAsJsonArray("choices");

        if (choices.size() == 0) {
            throw new ParseException("å“åº”ä¸­æ²¡æœ‰choices");
        }

        JsonObject firstChoice = choices.get(0).getAsJsonObject();
        JsonObject message = firstChoice.getAsJsonObject("message");
        String content = message.get("content").getAsString();

        // è§£æJSONå†…å®¹
        JsonObject analysisResult = JsonParser.parseString(content).getAsJsonObject();

        return LlmResponse.builder()
            .issues(parseIssues(analysisResult.getAsJsonArray("issues")))
            .overallAssessment(analysisResult.get("overall_assessment").getAsString())
            .rustMigrationRecommended(
                analysisResult.get("rust_migration_recommended").getAsBoolean())
            .rustMigrationReason(
                analysisResult.get("rust_migration_reason").getAsString())
            .build();
    }

    private static List<AiIssue> parseIssues(JsonArray issuesArray) {
        List<AiIssue> issues = new ArrayList<>();

        for (JsonElement elem : issuesArray) {
            JsonObject issueObj = elem.getAsJsonObject();

            AiIssue issue = AiIssue.builder()
                .line(issueObj.get("line").getAsInt())
                .severity(Severity.valueOf(issueObj.get("severity").getAsString().toUpperCase()))
                .category(issueObj.get("category").getAsString())
                .description(issueObj.get("description").getAsString())
                .impact(issueObj.get("impact").getAsString())
                .suggestion(issueObj.get("suggestion").getAsString())
                .codeFix(issueObj.get("code_fix").getAsString())
                .build();

            issues.add(issue);
        }

        return issues;
    }
}
```

**æ··åˆå†³ç­–å¼•æ“ï¼š**
```java
public class DecisionEngine {

    private final SecurityAnalyzer staticAnalyzer;
    private final LlmClient llmClient;

    public EnhancedAnalysisResult analyze(String sourcePath) {
        // 1. é™æ€åˆ†æ
        AnalysisResult staticResult = staticAnalyzer.analyze(sourcePath);

        // 2. AIå¢å¼ºåˆ†æ
        List<SourceFile> files = staticResult.getFiles();
        Map<String, LlmResponse> aiAnalysis = new HashMap<>();

        for (SourceFile file : files) {
            List<Issue> fileIssues = staticResult.getIssuesForFile(file);

            if (!fileIssues.isEmpty()) {
                String prompt = PromptBuilder.buildAnalysisPrompt(file, fileIssues);
                try {
                    LlmResponse response = llmClient.analyze(prompt);
                    aiAnalysis.put(file.getPath(), response);
                } catch (Exception e) {
                    logger.warn("AIåˆ†æå¤±è´¥: " + file.getPath(), e);
                }
            }
        }

        // 3. ç»“æœèåˆ
        List<EnhancedIssue> enhancedIssues = mergeResults(staticResult, aiAnalysis);

        // 4. ä¼˜å…ˆçº§æ’åº
        enhancedIssues.sort(Comparator
            .comparing(EnhancedIssue::getSeverity)
            .thenComparing(EnhancedIssue::getConfidence)
            .reversed()
        );

        return EnhancedAnalysisResult.builder()
            .issues(enhancedIssues)
            .statistics(computeStatistics(enhancedIssues))
            .recommendations(generateRecommendations(enhancedIssues))
            .build();
    }

    private List<EnhancedIssue> mergeResults(
            AnalysisResult staticResult,
            Map<String, LlmResponse> aiAnalysis) {

        List<EnhancedIssue> enhanced = new ArrayList<>();

        for (Issue staticIssue : staticResult.getIssues()) {
            EnhancedIssue.Builder builder = EnhancedIssue.builder()
                .from(staticIssue)
                .confidence(0.7);  // é™æ€åˆ†æç½®ä¿¡åº¦

            // æŸ¥æ‰¾å¯¹åº”çš„AIåˆ†æ
            LlmResponse aiResponse = aiAnalysis.get(staticIssue.getFile());
            if (aiResponse != null) {
                Optional<AiIssue> matchingAiIssue = aiResponse.getIssues().stream()
                    .filter(ai -> Math.abs(ai.getLine() - staticIssue.getLine()) <= 2)
                    .findFirst();

                if (matchingAiIssue.isPresent()) {
                    AiIssue aiIssue = matchingAiIssue.get();
                    builder
                        .aiDescription(aiIssue.getDescription())
                        .aiSuggestion(aiIssue.getSuggestion())
                        .codeFix(aiIssue.getCodeFix())
                        .confidence(0.9);  // AIç¡®è®¤çš„é—®é¢˜ç½®ä¿¡åº¦æ›´é«˜
                }
            }

            enhanced.add(builder.build());
        }

        return enhanced;
    }
}
```

**ç¼“å­˜æœºåˆ¶ï¼š**
```java
public class CachedLlmClient extends LlmClient {

    private final Cache<String, LlmResponse> cache;

    public CachedLlmClient(String apiKey, String baseUrl, String model) {
        super(apiKey, baseUrl, model);

        this.cache = CacheBuilder.newBuilder()
            .maximumSize(100)
            .expireAfterWrite(1, TimeUnit.HOURS)
            .build();
    }

    @Override
    public LlmResponse analyze(String prompt) throws IOException {
        String cacheKey = computeHash(prompt);

        LlmResponse cached = cache.getIfPresent(cacheKey);
        if (cached != null) {
            logger.debug("ä½¿ç”¨ç¼“å­˜ç»“æœ");
            return cached;
        }

        LlmResponse response = super.analyze(prompt);
        cache.put(cacheKey, response);

        return response;
    }

    private String computeHash(String prompt) {
        try {
            MessageDigest md = MessageDigest.getInstance("SHA-256");
            byte[] hash = md.digest(prompt.getBytes(StandardCharsets.UTF_8));
            return Base64.getEncoder().encodeToString(hash);
        } catch (NoSuchAlgorithmException e) {
            throw new RuntimeException(e);
        }
    }
}
```

#### äº¤ä»˜ç‰©

- âœ… LlmClient.javaï¼ˆAIæ¥å£å°è£…ï¼‰
- âœ… PromptBuilder.javaï¼ˆPromptæ¨¡æ¿åº“ï¼‰
- âœ… ResponseParser.javaï¼ˆå“åº”è§£æå™¨ï¼‰
- âœ… DecisionEngine.javaï¼ˆæ··åˆå†³ç­–å¼•æ“ï¼‰
- âœ… CachedLlmClient.javaï¼ˆç¼“å­˜å®ç°ï¼‰

#### éªŒæ”¶æ ‡å‡†

- [ ] æˆåŠŸè°ƒç”¨OpenAI/DeepSeek API
- [ ] AIè¿”å›ç»“æ„åŒ–JSONå“åº”
- [ ] AIå»ºè®®ä¸é™æ€åˆ†æç»“æœæ­£ç¡®èåˆ
- [ ] APIè°ƒç”¨æˆåŠŸç‡ > 95%
- [ ] å“åº”æ—¶é—´ < 5ç§’ï¼ˆå•æ¬¡è¯·æ±‚ï¼‰
- [ ] ç¼“å­˜å‘½ä¸­ç‡ > 30%ï¼ˆé‡å¤åˆ†æï¼‰

#### é£é™©ä¸ä¾èµ–

- **ä¾èµ–ï¼š** é˜¶æ®µ1ã€é˜¶æ®µ2å®Œæˆ
- **é£é™©ï¼š** APIé™æµ â†’ ç¼“è§£ï¼šé‡è¯•æœºåˆ¶ + å¤‡ç”¨API

---

### ğŸ“Œ é˜¶æ®µ4ï¼šä»£ç ç”Ÿæˆä¸é‡æ„ âš ï¸

**â± æ—¶é—´ä¼°ç®—ï¼š** 7-10å¤©
**ğŸ¯ ç›®æ ‡ï¼š** å®ç°ä»£ç ä¿®å¤ç”Ÿæˆå’ŒRustè¿ç§»å»ºè®®ï¼ˆå¯é™çº§ï¼‰

**âš ï¸ é«˜é£é™©é˜¶æ®µ - é™çº§ç­–ç•¥ï¼š**
- **Phase 1ï¼ˆMVPï¼‰ï¼š** ä»…ç”Ÿæˆä¿®å¤å»ºè®®å’Œç¤ºä¾‹ä»£ç ï¼Œä¸è‡ªåŠ¨ä¿®æ”¹
- **Phase 2ï¼ˆè¿›é˜¶ï¼‰ï¼š** ç®€å•å‡½æ•°è‡ªåŠ¨è½¬æ¢ï¼ˆå¯é€‰ï¼‰

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ID | ä»»åŠ¡æè¿° | å·¥æ—¶ | ä¼˜å…ˆçº§ |
|--------|---------|------|--------|
| T4.1 | ä»£ç ä¿®å¤å»ºè®®ç”Ÿæˆ | 2å¤© | P0 |
| T4.2 | Câ†’Rustè¿ç§»å»ºè®®ç”Ÿæˆ | 2å¤© | P0 |
| T4.3 | ä»£ç æ¨¡å¼åŒ¹é…ä¸æ›¿æ¢ | 2å¤© | P1 |
| T4.4 | Rustä»£ç è¯­æ³•éªŒè¯ | 1å¤© | P2 |
| T4.5 | ç®€å•å‡½æ•°è‡ªåŠ¨è½¬æ¢ï¼ˆå¯é€‰ï¼‰ | 3å¤© | P2 |

#### æŠ€æœ¯æ–¹æ¡ˆï¼ˆPhase 1 - MVPï¼‰

**ä»£ç ä¿®å¤å»ºè®®ç”Ÿæˆï¼š**
```java
public class CodeGenerator {

    private final LlmClient llmClient;

    public FixSuggestion generateFixSuggestion(Issue issue, String codeContext) {
        String prompt = PromptBuilder.buildFixPrompt(issue, codeContext);

        try {
            LlmResponse response = llmClient.analyze(prompt);

            return FixSuggestion.builder()
                .issue(issue)
                .originalCode(codeContext)
                .fixedCode(response.getFixedCode())
                .explanation(response.getExplanation())
                .confidence(response.getConfidence())
                .steps(response.getSteps())
                .build();
        } catch (Exception e) {
            logger.error("ç”Ÿæˆä¿®å¤å»ºè®®å¤±è´¥", e);
            return FixSuggestion.fallback(issue);
        }
    }
}
```

**Rustè¿ç§»å»ºè®®ï¼š**
```java
public class RustMigrationAdvisor {

    private final LlmClient llmClient;

    public MigrationSuggestion suggestMigration(SourceFile file, List<Issue> issues) {
        String prompt = PromptBuilder.buildRustMigrationPrompt(file, issues);

        LlmResponse response = llmClient.analyze(prompt);

        return MigrationSuggestion.builder()
            .sourceFile(file)
            .recommended(response.isRustMigrationRecommended())
            .reason(response.getRustMigrationReason())
            .exampleRustCode(response.getRustCodeExample())
            .migrationSteps(response.getMigrationSteps())
            .estimatedEffort(response.getEstimatedEffort())
            .benefits(response.getBenefits())
            .challenges(response.getChallenges())
            .build();
    }
}
```

**Promptæ¨¡æ¿ï¼š**
```java
public static String buildRustMigrationPrompt(SourceFile file, List<Issue> issues) {
    return String.format("""
        ä½ æ˜¯Rustè¯­è¨€ä¸“å®¶å’ŒC/C++ä»£ç è¿ç§»é¡¾é—®ã€‚

        ## Cä»£ç æ–‡ä»¶ï¼š%s
        ```c
        %s
        ```

        ## å®‰å…¨é—®é¢˜ï¼š
        %s

        è¯·æä¾›Rustè¿ç§»å»ºè®®ï¼ˆJSONæ ¼å¼ï¼‰ï¼š
        {
          "recommended": true/false,
          "reason": "è¿ç§»ç†ç”±æˆ–ä¸å»ºè®®ç†ç”±",
          "rust_code_example": "å…³é”®éƒ¨åˆ†çš„Rustä»£ç ç¤ºä¾‹",
          "migration_steps": [
            "æ­¥éª¤1: ...",
            "æ­¥éª¤2: ..."
          ],
          "type_mappings": {
            "char*": "String æˆ– &str",
            "int": "i32"
          },
          "memory_management_changes": "è¯´æ˜å†…å­˜ç®¡ç†çš„å˜åŒ–",
          "estimated_effort": "Low|Medium|High",
          "benefits": ["ç›Šå¤„1", "ç›Šå¤„2"],
          "challenges": ["æŒ‘æˆ˜1", "æŒ‘æˆ˜2"]
        }
        """,
        file.getName(),
        file.getContent(),
        formatIssues(issues)
    );
}
```

#### äº¤ä»˜ç‰©

- âœ… CodeGenerator.javaï¼ˆä¿®å¤å»ºè®®ç”Ÿæˆï¼‰
- âœ… RustMigrationAdvisor.javaï¼ˆè¿ç§»å»ºè®®ï¼‰
- âœ… PromptBuilderå¢å¼ºï¼ˆä¿®å¤å’Œè¿ç§»æ¨¡æ¿ï¼‰
- âœ… 10+ä¸ªæµ‹è¯•ç”¨ä¾‹

#### éªŒæ”¶æ ‡å‡†ï¼ˆPhase 1ï¼‰

- [ ] æˆåŠŸç”Ÿæˆä»£ç ä¿®å¤å»ºè®®
- [ ] ä¿®å¤å»ºè®®åŒ…å«ä»£ç ç¤ºä¾‹å’Œæ­¥éª¤
- [ ] Rustè¿ç§»å»ºè®®åˆç†ä¸”è¯¦ç»†
- [ ] ç±»å‹æ˜ å°„å‡†ç¡®
- [ ] ç¤ºä¾‹ä»£ç è¯­æ³•æ­£ç¡®

#### é£é™©ä¸ä¾èµ–

- **ä¾èµ–ï¼š** é˜¶æ®µ3å®Œæˆ
- **é£é™©ï¼š** ä»£ç è½¬æ¢è¯­ä¹‰ä¸ç­‰ä»· â†’ ç¼“è§£ï¼šä»…ç”Ÿæˆå»ºè®®ï¼Œä¸è‡ªåŠ¨ä¿®æ”¹
- **é™çº§è§¦å‘ï¼š** æ—¶é—´ä¸è¶³æˆ–å‡†ç¡®ç‡ä½

---

### ğŸ“Œ é˜¶æ®µ5ï¼šæŠ¥å‘Šç”Ÿæˆä¸å¯è§†åŒ–

**â± æ—¶é—´ä¼°ç®—ï¼š** 3-4å¤©
**ğŸ¯ ç›®æ ‡ï¼š** ç”Ÿæˆä¸“ä¸šçš„å®‰å…¨åˆ†ææŠ¥å‘Š

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ID | ä»»åŠ¡æè¿° | å·¥æ—¶ | ä¾èµ– |
|--------|---------|------|------|
| T5.1 | HTMLæŠ¥å‘Šæ¨¡æ¿è®¾è®¡ | 1å¤© | - |
| T5.2 | MarkdownæŠ¥å‘Šæ¨¡æ¿ | 0.5å¤© | - |
| T5.3 | æŠ¥å‘Šç”Ÿæˆå¼•æ“ | 1å¤© | T5.1, T5.2 |
| T5.4 | æ•°æ®å¯è§†åŒ–ï¼ˆå›¾è¡¨ï¼‰ | 1å¤© | T5.3 |
| T5.5 | JSONå¯¼å‡ºåŠŸèƒ½ | 0.5å¤© | T5.3 |

#### æŠ€æœ¯æ–¹æ¡ˆ

**æŠ¥å‘Šç”Ÿæˆå™¨ï¼š**
```java
public class ReportGenerator {

    private final Configuration freemarkerConfig;

    public void generateHtmlReport(EnhancedAnalysisResult result, String outputPath)
            throws IOException, TemplateException {

        Template template = freemarkerConfig.getTemplate("report.ftlh");

        Map<String, Object> data = new HashMap<>();
        data.put("projectName", result.getProjectName());
        data.put("analysisDate", LocalDateTime.now());
        data.put("issues", result.getIssues());
        data.put("statistics", result.getStatistics());
        data.put("recommendations", result.getRecommendations());
        data.put("chartData", prepareChartData(result));

        try (Writer writer = new FileWriter(outputPath)) {
            template.process(data, writer);
        }

        logger.info("HTMLæŠ¥å‘Šå·²ç”Ÿæˆ: " + outputPath);
    }

    public void generateMarkdownReport(EnhancedAnalysisResult result, String outputPath)
            throws IOException {

        StringBuilder md = new StringBuilder();

        md.append("# ").append(result.getProjectName()).append(" å®‰å…¨åˆ†ææŠ¥å‘Š\n\n");
        md.append("**åˆ†ææ—¶é—´ï¼š** ").append(LocalDateTime.now()).append("\n\n");

        // æ¦‚è§ˆ
        md.append("## ğŸ“Š æ¦‚è§ˆ\n\n");
        Statistics stats = result.getStatistics();
        md.append("- æ€»é—®é¢˜æ•°ï¼š").append(stats.getTotalIssues()).append("\n");
        md.append("- ä¸¥é‡é—®é¢˜ï¼š").append(stats.getCriticalCount()).append("\n");
        md.append("- é«˜å±é—®é¢˜ï¼š").append(stats.getHighCount()).append("\n");
        md.append("- ä¸­å±é—®é¢˜ï¼š").append(stats.getMediumCount()).append("\n\n");

        // é—®é¢˜è¯¦æƒ…
        md.append("## âš ï¸ é—®é¢˜è¯¦æƒ…\n\n");
        for (EnhancedIssue issue : result.getIssues()) {
            md.append("### ").append(issue.getTitle()).append("\n\n");
            md.append("- **æ–‡ä»¶ï¼š** ").append(issue.getFile()).append(":").append(issue.getLine()).append("\n");
            md.append("- **ä¸¥é‡æ€§ï¼š** ").append(issue.getSeverity()).append("\n");
            md.append("- **ç±»åˆ«ï¼š** ").append(issue.getCategory()).append("\n\n");
            md.append("**æè¿°ï¼š** ").append(issue.getDescription()).append("\n\n");

            if (issue.getAiSuggestion() != null) {
                md.append("**ä¿®å¤å»ºè®®ï¼š** ").append(issue.getAiSuggestion()).append("\n\n");
            }

            if (issue.getCodeFix() != null) {
                md.append("**ä¿®å¤ä»£ç ï¼š**\n```c\n");
                md.append(issue.getCodeFix()).append("\n```\n\n");
            }

            md.append("---\n\n");
        }

        Files.writeString(Paths.get(outputPath), md.toString());
        logger.info("MarkdownæŠ¥å‘Šå·²ç”Ÿæˆ: " + outputPath);
    }
}
```

**HTMLæ¨¡æ¿ï¼ˆFreemarkerï¼‰ï¼š**
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${projectName} - å®‰å…¨åˆ†ææŠ¥å‘Š</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 40px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 { color: #333; border-bottom: 3px solid #007bff; padding-bottom: 10px; }
        h2 { color: #555; margin-top: 30px; }
        .statistics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            color: white;
        }
        .stat-card.critical { background: #dc3545; }
        .stat-card.high { background: #fd7e14; }
        .stat-card.medium { background: #ffc107; color: #333; }
        .stat-card.low { background: #17a2b8; }
        .stat-card h3 { margin: 0; font-size: 2em; }
        .stat-card p { margin: 5px 0 0; }

        .issue {
            border-left: 4px solid;
            padding: 15px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .issue.critical { border-left-color: #dc3545; }
        .issue.high { border-left-color: #fd7e14; }
        .issue.medium { border-left-color: #ffc107; }
        .issue.low { border-left-color: #17a2b8; }

        .issue h3 { margin-top: 0; color: #333; }
        .issue-meta { color: #666; font-size: 0.9em; margin: 5px 0; }
        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .suggestion {
            background: #e7f3ff;
            border-left: 4px solid #007bff;
            padding: 10px;
            margin: 10px 0;
        }
        .chart-container {
            position: relative;
            height: 400px;
            margin: 30px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š ${projectName} å®‰å…¨åˆ†ææŠ¥å‘Š</h1>
        <p><strong>åˆ†ææ—¶é—´ï¼š</strong> ${analysisDate?string('yyyy-MM-dd HH:mm:ss')}</p>

        <h2>ğŸ“ˆ ç»Ÿè®¡æ¦‚è§ˆ</h2>
        <div class="statistics">
            <div class="stat-card critical">
                <h3>${statistics.criticalCount}</h3>
                <p>ä¸¥é‡é—®é¢˜</p>
            </div>
            <div class="stat-card high">
                <h3>${statistics.highCount}</h3>
                <p>é«˜å±é—®é¢˜</p>
            </div>
            <div class="stat-card medium">
                <h3>${statistics.mediumCount}</h3>
                <p>ä¸­å±é—®é¢˜</p>
            </div>
            <div class="stat-card low">
                <h3>${statistics.lowCount}</h3>
                <p>ä½å±é—®é¢˜</p>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="severityChart"></canvas>
        </div>

        <div class="chart-container">
            <canvas id="categoryChart"></canvas>
        </div>

        <h2>âš ï¸ é—®é¢˜è¯¦æƒ…</h2>
        <#list issues as issue>
        <div class="issue ${issue.severity?lower_case}">
            <h3>${issue.title}</h3>
            <div class="issue-meta">
                <span>ğŸ“ ${issue.file}:${issue.line}</span> |
                <span>ğŸ”´ ${issue.severity}</span> |
                <span>ğŸ“‚ ${issue.category}</span>
            </div>

            <p><strong>æè¿°ï¼š</strong>${issue.description}</p>

            <#if issue.code??>
            <div class="code-block">
                <pre><code>${issue.code}</code></pre>
            </div>
            </#if>

            <#if issue.aiSuggestion??>
            <div class="suggestion">
                <strong>ğŸ’¡ AIå»ºè®®ï¼š</strong>${issue.aiSuggestion}
            </div>
            </#if>

            <#if issue.codeFix??>
            <p><strong>ğŸ”§ ä¿®å¤ä»£ç ï¼š</strong></p>
            <div class="code-block">
                <pre><code>${issue.codeFix}</code></pre>
            </div>
            </#if>
        </div>
        </#list>

        <h2>ğŸ“ æ”¹è¿›å»ºè®®</h2>
        <#list recommendations as rec>
        <div class="suggestion">
            <strong>${rec.title}</strong>
            <p>${rec.description}</p>
        </div>
        </#list>
    </div>

    <script>
        // ä¸¥é‡æ€§åˆ†å¸ƒå›¾è¡¨
        const severityCtx = document.getElementById('severityChart');
        new Chart(severityCtx, {
            type: 'doughnut',
            data: {
                labels: ['ä¸¥é‡', 'é«˜å±', 'ä¸­å±', 'ä½å±'],
                datasets: [{
                    data: [
                        ${statistics.criticalCount},
                        ${statistics.highCount},
                        ${statistics.mediumCount},
                        ${statistics.lowCount}
                    ],
                    backgroundColor: ['#dc3545', '#fd7e14', '#ffc107', '#17a2b8']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: { display: true, text: 'é—®é¢˜ä¸¥é‡æ€§åˆ†å¸ƒ' }
                }
            }
        });

        // ç±»åˆ«åˆ†å¸ƒå›¾è¡¨
        const categoryCtx = document.getElementById('categoryChart');
        new Chart(categoryCtx, {
            type: 'bar',
            data: {
                labels: [<#list chartData.categories as cat>'${cat}'<#sep>, </#list>],
                datasets: [{
                    label: 'é—®é¢˜æ•°é‡',
                    data: [<#list chartData.counts as count>${count}<#sep>, </#list>],
                    backgroundColor: '#007bff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: { display: true, text: 'é—®é¢˜ç±»åˆ«åˆ†å¸ƒ' }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });
    </script>
</body>
</html>
```

#### äº¤ä»˜ç‰©

- âœ… ReportGenerator.java
- âœ… HTMLæ¨¡æ¿ï¼ˆreport.ftlhï¼‰
- âœ… Markdownæ¨¡æ¿
- âœ… CSSæ ·å¼æ–‡ä»¶
- âœ… å›¾è¡¨é›†æˆ

#### éªŒæ”¶æ ‡å‡†

- [ ] ç”Ÿæˆçš„HTMLæŠ¥å‘Šç¾è§‚ä¸”ä¿¡æ¯å®Œæ•´
- [ ] MarkdownæŠ¥å‘Šåœ¨GitHubæ­£ç¡®æ¸²æŸ“
- [ ] å›¾è¡¨æ­£ç¡®æ˜¾ç¤ºæ•°æ®
- [ ] JSONæ ¼å¼å¯è¢«å…¶ä»–å·¥å…·è§£æ
- [ ] æŠ¥å‘Šç”Ÿæˆæ—¶é—´ < 2ç§’

#### é£é™©ä¸ä¾èµ–

- **ä¾èµ–ï¼š** é˜¶æ®µ3æˆ–é˜¶æ®µ4å®Œæˆ
- **é£é™©ï¼š** ä½

---

### ğŸ“Œ é˜¶æ®µ6ï¼šæ€§èƒ½ä¼˜åŒ–ä¸æµ‹è¯•

**â± æ—¶é—´ä¼°ç®—ï¼š** 4-5å¤©
**ğŸ¯ ç›®æ ‡ï¼š** ä¼˜åŒ–æ€§èƒ½ï¼Œå»ºç«‹å®Œæ•´çš„æµ‹è¯•ä½“ç³»

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ID | ä»»åŠ¡æè¿° | å·¥æ—¶ | ä¾èµ– |
|--------|---------|------|------|
| T6.1 | å¹¶è¡Œåˆ†æä¼˜åŒ– | 1å¤© | T2.6 |
| T6.2 | å¢é‡åˆ†æå®ç° | 1å¤© | T2.6 |
| T6.3 | å•å…ƒæµ‹è¯•ç¼–å†™ | 1.5å¤© | æ‰€æœ‰æ¨¡å— |
| T6.4 | é›†æˆæµ‹è¯•ä¸E2Eæµ‹è¯• | 1å¤© | æ‰€æœ‰æ¨¡å— |
| T6.5 | æ€§èƒ½åŸºå‡†æµ‹è¯• | 0.5å¤© | T6.1, T6.2 |

#### æŠ€æœ¯æ–¹æ¡ˆ

**å¢é‡åˆ†æï¼š**
```java
public class IncrementalAnalyzer {

    private final Cache<String, AnalysisResult> cache;
    private final Path cacheDir;

    public AnalysisResult analyze(String sourcePath, boolean incremental) {
        if (!incremental) {
            return fullAnalysis(sourcePath);
        }

        // 1. è®¡ç®—æ–‡ä»¶å“ˆå¸Œ
        Map<String, FileHash> currentHashes = computeFileHashes(sourcePath);
        Map<String, FileHash> cachedHashes = loadCachedHashes(sourcePath);

        // 2. è¯†åˆ«å˜æ›´æ–‡ä»¶
        List<SourceFile> changedFiles = new ArrayList<>();
        for (Map.Entry<String, FileHash> entry : currentHashes.entrySet()) {
            FileHash cached = cachedHashes.get(entry.getKey());
            if (cached == null || !cached.equals(entry.getValue())) {
                changedFiles.add(new SourceFile(entry.getKey()));
            }
        }

        if (changedFiles.isEmpty()) {
            logger.info("æ²¡æœ‰æ–‡ä»¶å˜æ›´ï¼Œä½¿ç”¨ç¼“å­˜ç»“æœ");
            return loadCachedResult(sourcePath);
        }

        logger.info("æ£€æµ‹åˆ° {} ä¸ªæ–‡ä»¶å˜æ›´ï¼Œè¿›è¡Œå¢é‡åˆ†æ", changedFiles.size());

        // 3. ä»…åˆ†æå˜æ›´æ–‡ä»¶
        AnalysisResult incrementalResult = analyzeFiles(changedFiles);

        // 4. åˆå¹¶ç¼“å­˜ç»“æœ
        AnalysisResult cachedResult = loadCachedResult(sourcePath);
        AnalysisResult merged = mergeResults(cachedResult, incrementalResult, changedFiles);

        // 5. æ›´æ–°ç¼“å­˜
        saveCachedHashes(sourcePath, currentHashes);
        saveCachedResult(sourcePath, merged);

        return merged;
    }

    private Map<String, FileHash> computeFileHashes(String sourcePath) throws IOException {
        Map<String, FileHash> hashes = new HashMap<>();
        MessageDigest md = MessageDigest.getInstance("SHA-256");

        Files.walk(Paths.get(sourcePath))
            .filter(Files::isRegularFile)
            .filter(this::isSupportedFile)
            .forEach(path -> {
                try {
                    byte[] content = Files.readAllBytes(path);
                    byte[] hash = md.digest(content);
                    hashes.put(path.toString(), new FileHash(hash, content.length));
                } catch (IOException e) {
                    logger.warn("æ— æ³•è¯»å–æ–‡ä»¶: " + path, e);
                }
            });

        return hashes;
    }
}
```

**æ€§èƒ½ç›‘æ§ï¼š**
```java
public class PerformanceMonitor {

    private final Map<String, Timer> timers = new ConcurrentHashMap<>();

    public void startTimer(String operation) {
        timers.put(operation, Timer.start());
    }

    public long stopTimer(String operation) {
        Timer timer = timers.remove(operation);
        if (timer == null) {
            logger.warn("Timer not found: " + operation);
            return 0;
        }

        long duration = timer.stop();
        logger.info("â±ï¸  {} è€—æ—¶: {}ms", operation, duration);

        return duration;
    }

    public void recordMetrics(AnalysisResult result, long duration) {
        Metrics metrics = Metrics.builder()
            .filesAnalyzed(result.getFileCount())
            .issuesFound(result.getIssueCount())
            .duration(duration)
            .linesOfCode(result.getTotalLines())
            .throughput(result.getTotalLines() / (duration / 1000.0))
            .build();

        logger.info("ğŸ“Š æ€§èƒ½æŒ‡æ ‡: {}", metrics);
    }
}
```

**å•å…ƒæµ‹è¯•ç¤ºä¾‹ï¼š**
```java
@Test
public void testSecurityAnalyzer_detectsBufferOverflow() {
    // Arrange
    SecurityAnalyzer analyzer = new SecurityAnalyzer();
    String testCode = """
        void test() {
            char buf[10];
            strcpy(buf, "this is too long");  // ç¼“å†²åŒºæº¢å‡º
        }
        """;

    // Act
    AnalysisResult result = analyzer.analyze(testCode);

    // Assert
    assertFalse(result.getIssues().isEmpty());

    Issue issue = result.getIssues().get(0);
    assertEquals("BUFFER_OVERFLOW", issue.getType());
    assertEquals(Severity.CRITICAL, issue.getSeverity());
    assertTrue(issue.getTitle().contains("strcpy"));
}

@Test
public void testIncrementalAnalyzer_skipUnchangedFiles() {
    // Arrange
    IncrementalAnalyzer analyzer = new IncrementalAnalyzer();
    String sourcePath = "test/fixtures/bzip2";

    // Act - é¦–æ¬¡åˆ†æ
    AnalysisResult firstRun = analyzer.analyze(sourcePath, true);

    // Act - ç¬¬äºŒæ¬¡åˆ†æï¼ˆæ— å˜æ›´ï¼‰
    AnalysisResult secondRun = analyzer.analyze(sourcePath, true);

    // Assert
    assertEquals(firstRun.getIssues(), secondRun.getIssues());
    // ç¬¬äºŒæ¬¡åº”è¯¥ä½¿ç”¨ç¼“å­˜ï¼Œé€Ÿåº¦æ›´å¿«
}
```

#### äº¤ä»˜ç‰©

- âœ… IncrementalAnalyzer.java
- âœ… PerformanceMonitor.java
- âœ… å•å…ƒæµ‹è¯•å¥—ä»¶ï¼ˆè¦†ç›–ç‡ > 80%ï¼‰
- âœ… é›†æˆæµ‹è¯•ç”¨ä¾‹
- âœ… æ€§èƒ½åŸºå‡†æŠ¥å‘Š

#### éªŒæ”¶æ ‡å‡†

- [ ] åˆ†æbzip2æ€§èƒ½ < 30ç§’
- [ ] å¢é‡åˆ†æé€Ÿåº¦æå‡ > 60%
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] å†…å­˜ä½¿ç”¨ < 512MB

#### é£é™©ä¸ä¾èµ–

- **ä¾èµ–ï¼š** æ‰€æœ‰å‰ç½®é˜¶æ®µ
- **é£é™©ï¼š** ä½

---

### ğŸ“Œ é˜¶æ®µ7ï¼šå®¹å™¨åŒ–ä¸éƒ¨ç½²

**â± æ—¶é—´ä¼°ç®—ï¼š** 2-3å¤©
**ğŸ¯ ç›®æ ‡ï¼š** Dockerå®¹å™¨åŒ–ï¼Œç¼–å†™æ–‡æ¡£ï¼Œå‡†å¤‡Demo

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ID | ä»»åŠ¡æè¿° | å·¥æ—¶ | ä¾èµ– |
|--------|---------|------|------|
| T7.1 | Dockerfileç¼–å†™ä¸ä¼˜åŒ– | 1å¤© | T6.5 |
| T7.2 | ç”¨æˆ·æ–‡æ¡£ç¼–å†™ | 1å¤© | - |
| T7.3 | Demoå‡†å¤‡ä¸è§†é¢‘å½•åˆ¶ | 1å¤© | T6.5 |

#### æŠ€æœ¯æ–¹æ¡ˆ

**Dockerfileï¼š**
```dockerfile
# å¤šé˜¶æ®µæ„å»º
FROM maven:3.9-eclipse-temurin-17 AS builder

WORKDIR /app

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY pom.xml .
RUN mvn dependency:go-offline

# å¤åˆ¶æºç å¹¶æ„å»º
COPY src ./src
RUN mvn clean package -DskipTests

# è¿è¡Œæ—¶é•œåƒ
FROM eclipse-temurin:17-jre-alpine

# å®‰è£…åˆ†æå·¥å…·
RUN apk add --no-cache \
    clang \
    python3 \
    py3-pip \
    && pip3 install semgrep \
    && rm -rf /var/cache/apk/*

WORKDIR /app

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder /app/target/harmony-agent.jar .
COPY --from=builder /app/src/main/resources/rules ./rules

# é…ç½®ç¯å¢ƒå˜é‡
ENV JAVA_OPTS="-Xmx512m"
ENV HARMONY_AGENT_HOME="/app"

# åˆ›å»ºæŒ‚è½½ç‚¹
VOLUME ["/workspace", "/app/config"]

ENTRYPOINT ["java", "-jar", "harmony-agent.jar"]
CMD ["--help"]
```

**Docker Composeï¼š**
```yaml
version: '3.8'

services:
  harmony-agent:
    build: .
    image: harmony-agent:latest
    volumes:
      - ./workspace:/workspace
      - ./config:/app/config
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    command: analyze /workspace/bzip2
```

**æ–‡æ¡£ç»“æ„ï¼š**
```
docs/
â”œâ”€â”€ README.md              # é¡¹ç›®æ¦‚è¿°ä¸å¿«é€Ÿå¼€å§‹
â”œâ”€â”€ installation.md        # å®‰è£…æŒ‡å—
â”‚   â”œâ”€â”€ Nativeå®‰è£…
â”‚   â”œâ”€â”€ Dockerå®‰è£…
â”‚   â””â”€â”€ ä¾èµ–å·¥å…·å®‰è£…
â”œâ”€â”€ user-guide.md         # ç”¨æˆ·æ‰‹å†Œ
â”‚   â”œâ”€â”€ analyzeå‘½ä»¤
â”‚   â”œâ”€â”€ suggestå‘½ä»¤
â”‚   â”œâ”€â”€ refactorå‘½ä»¤
â”‚   â”œâ”€â”€ reportå‘½ä»¤
â”‚   â””â”€â”€ configå‘½ä»¤
â”œâ”€â”€ configuration.md      # é…ç½®è¯´æ˜
â”‚   â”œâ”€â”€ é…ç½®æ–‡ä»¶æ ¼å¼
â”‚   â”œâ”€â”€ AI APIé…ç½®
â”‚   â”œâ”€â”€ åˆ†æçº§åˆ«
â”‚   â””â”€â”€ è¾“å‡ºæ ¼å¼
â”œâ”€â”€ architecture.md       # æ¶æ„è®¾è®¡
â”‚   â”œâ”€â”€ ç³»ç»Ÿæ¶æ„
â”‚   â”œâ”€â”€ æ¨¡å—è¯´æ˜
â”‚   â””â”€â”€ æŠ€æœ¯æ ˆ
â”œâ”€â”€ api-reference.md      # APIå‚è€ƒï¼ˆJava APIï¼‰
â”œâ”€â”€ semgrep-rules.md      # Semgrepè§„åˆ™æ–‡æ¡£
â”œâ”€â”€ troubleshooting.md    # æ•…éšœæ’æŸ¥
â””â”€â”€ examples/
    â”œâ”€â”€ bzip2-analysis.md    # bzip2åˆ†æç¤ºä¾‹
    â”œâ”€â”€ custom-rules.md      # è‡ªå®šä¹‰è§„åˆ™ç¤ºä¾‹
    â””â”€â”€ ci-integration.md    # CI/CDé›†æˆç¤ºä¾‹
```

**å¿«é€Ÿå¼€å§‹æ–‡æ¡£ï¼š**
```markdown
# HarmonySafeAgent

> OpenHarmonyä»£ç å®‰å…¨åˆ†æå·¥å…· - è‡ªåŠ¨åŒ–å®‰å…¨æ£€æµ‹ä¸æ”¹è¿›å»ºè®®

## âœ¨ ç‰¹æ€§

- ğŸ” **é™æ€åˆ†æ**ï¼šé›†æˆClangå’ŒSemgrepï¼Œè¯†åˆ«å†…å­˜å®‰å…¨ã€å¹¶å‘ç­‰é—®é¢˜
- ğŸ¤– **AIå¢å¼º**ï¼šåˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹æä¾›ä¸Šä¸‹æ–‡ç›¸å…³çš„ä¿®å¤å»ºè®®
- ğŸ¦€ **Rustè¿ç§»**ï¼šè¾…åŠ©C/C++ä»£ç å‘Rustè¿ç§»
- ğŸ“Š **å¯è§†åŒ–æŠ¥å‘Š**ï¼šç”Ÿæˆä¸“ä¸šçš„HTML/Markdownå®‰å…¨æŠ¥å‘Š
- âš¡ **å¢é‡åˆ†æ**ï¼šä»…åˆ†æå˜æ›´æ–‡ä»¶ï¼Œæå‡æ•ˆç‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Dockeræ–¹å¼ï¼ˆæ¨èï¼‰

```bash
# 1. è®¾ç½®APIå¯†é’¥
export OPENAI_API_KEY=sk-xxxxx

# 2. è¿è¡Œåˆ†æ
docker run -v $(pwd):/workspace \
  -e OPENAI_API_KEY=$OPENAI_API_KEY \
  harmony-agent:latest \
  analyze /workspace/bzip2

# 3. ç”ŸæˆæŠ¥å‘Š
docker run -v $(pwd):/workspace \
  harmony-agent:latest \
  report /workspace/bzip2 -f html -o /workspace/report.html
```

### Nativeæ–¹å¼

```bash
# 1. å®‰è£…ä¾èµ–
# macOS
brew install clang semgrep

# Ubuntu
apt-get install clang
pip install semgrep

# 2. é…ç½®APIå¯†é’¥
java -jar harmony-agent.jar config set ai.api_key sk-xxxxx

# 3. è¿è¡Œåˆ†æ
java -jar harmony-agent.jar analyze ./bzip2

# 4. æŸ¥çœ‹å»ºè®®
java -jar harmony-agent.jar suggest ./bzip2

# 5. ç”ŸæˆæŠ¥å‘Š
java -jar harmony-agent.jar report ./bzip2 -f html
```

## ğŸ“– æ–‡æ¡£

- [å®Œæ•´ç”¨æˆ·æ‰‹å†Œ](docs/user-guide.md)
- [é…ç½®è¯´æ˜](docs/configuration.md)
- [æ¶æ„è®¾è®¡](docs/architecture.md)
- [æ•…éšœæ’æŸ¥](docs/troubleshooting.md)

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åˆ†æbzip2æºç 

```bash
# æ·±åº¦åˆ†æ
harmony-agent analyze ./bzip2 --level deep

# è¾“å‡ºï¼š
âœ… åˆ†æå®Œæˆ
ğŸ“Š å‘ç° 42 ä¸ªå®‰å…¨é—®é¢˜
  - ä¸¥é‡: 8
  - é«˜å±: 15
  - ä¸­å±: 12
  - ä½å±: 7

ğŸ” ä¸»è¦é—®é¢˜ç±»åˆ«:
  - ç¼“å†²åŒºæº¢å‡º: 12
  - å†…å­˜æ³„æ¼: 8
  - ç©ºæŒ‡é’ˆè§£å¼•ç”¨: 6
  - æœªåˆå§‹åŒ–å˜é‡: 5
```

### è·å–AIå»ºè®®

```bash
harmony-agent suggest ./bzip2/bzlib.c

# è¾“å‡ºï¼š
ğŸ’¡ AIå»ºè®®ï¼šbzlib.c:234

é—®é¢˜ï¼šstrcpyå¯èƒ½å¯¼è‡´ç¼“å†²åŒºæº¢å‡º
ä¸¥é‡æ€§ï¼šCritical
ç½®ä¿¡åº¦ï¼š0.93

ä¿®å¤å»ºè®®ï¼š
ä½¿ç”¨strncpyæˆ–snprintfæ›¿ä»£strcpyï¼Œå¹¶ç¡®ä¿å­—ç¬¦ä¸²æ­£ç¡®ç»ˆæ­¢ã€‚

ä¿®å¤ä»£ç ï¼š
strncpy(dest, src, sizeof(dest) - 1);
dest[sizeof(dest) - 1] = '\0';

Rustè¿ç§»å»ºè®®ï¼š
å»ºè®®è¿ç§»åˆ°Rustï¼Œä½¿ç”¨Stringç±»å‹è‡ªåŠ¨ç®¡ç†å†…å­˜ã€‚
```

## ğŸ—ï¸ æ¶æ„

```
CLIå±‚ â†’ æ ¸å¿ƒå¼•æ“ â†’ AIæ¨ç†å±‚
                 â†’ å·¥å…·é“¾å±‚ (Clang/Semgrep)
```

## ğŸ“ è®¸å¯è¯

MIT License
```

#### äº¤ä»˜ç‰©

- âœ… Dockerfileï¼ˆä¼˜åŒ–å < 500MBï¼‰
- âœ… Docker Composeé…ç½®
- âœ… å®Œæ•´ç”¨æˆ·æ–‡æ¡£
- âœ… bzip2åˆ†æDemo
- âœ… Demoæ¼”ç¤ºè§†é¢‘

#### éªŒæ”¶æ ‡å‡†

- [ ] Dockeré•œåƒæˆåŠŸæ„å»ºå¹¶è¿è¡Œ
- [ ] é•œåƒå¤§å° < 500MB
- [ ] æ–‡æ¡£æ¸…æ™°å®Œæ•´
- [ ] Demoå±•ç¤ºå®Œæ•´åŠŸèƒ½æµç¨‹
- [ ] è§†é¢‘é•¿åº¦ 5-10åˆ†é’Ÿ

#### é£é™©ä¸ä¾èµ–

- **ä¾èµ–ï¼š** æ‰€æœ‰å‰ç½®é˜¶æ®µ
- **é£é™©ï¼š** ä½

---

## âš ï¸ æŠ€æœ¯é£é™©ç®¡ç†

### é£é™©çŸ©é˜µ

| é£é™©ID | æè¿° | å½±å“ | æ¦‚ç‡ | ç¼“è§£ç­–ç•¥ | è§¦å‘æ¡ä»¶ |
|--------|------|------|------|---------|---------|
| **R1** | Clang/Semgrepè¾“å‡ºæ ¼å¼å˜åŒ– | ğŸ”´ High | 30% | ç‰ˆæœ¬é”å®š + é€‚é…å™¨æ¨¡å¼ | å·¥å…·ç‰ˆæœ¬å‡çº§ |
| **R2** | Câ†’Rustè½¬æ¢è¯­ä¹‰ä¸ç­‰ä»· | ğŸ”´ Critical | 60% | **é™çº§åˆ°Phase 1ï¼šä»…å»ºè®®** | å‡†ç¡®ç‡ < 70% |
| **R3** | AI APIé™æµ/å¤±è´¥ | ğŸŸ¡ Medium | 40% | é‡è¯• + é™çº§åˆ°é™æ€åˆ†æ | APIé”™è¯¯ç‡ > 5% |
| **R4** | å¤§å‹é¡¹ç›®æ€§èƒ½é—®é¢˜ | ğŸŸ¡ Medium | 50% | å¢é‡åˆ†æ + å¹¶è¡Œå¤„ç† | åˆ†ææ—¶é—´ > 5åˆ†é’Ÿ |
| **R5** | APIå¯†é’¥æ³„éœ²é£é™© | ğŸ”´ High | 20% | AES-256åŠ å¯† + æƒé™æ§åˆ¶ | é…ç½®æ–‡ä»¶æš´éœ² |
| **R6** | ASTè§£æå¤æ‚åº¦è¶…é¢„æœŸ | ğŸŸ¡ Medium | 40% | **é™çº§åˆ°æ¨¡å¼åŒ¹é…** | å®ç°æ—¶é—´ > 3å¤© |
| **R7** | è·¨å¹³å°å…¼å®¹æ€§é—®é¢˜ | ğŸŸ¢ Low | 30% | Java NIO + è·¯å¾„æ ‡å‡†åŒ– | Windowsæµ‹è¯•å¤±è´¥ |
| **R8** | ä¾èµ–å·¥å…·æœªå®‰è£… | ğŸŸ¡ Medium | 50% | å¯åŠ¨æ£€æŸ¥ + Dockeræ–¹æ¡ˆ | ç¯å¢ƒéªŒè¯å¤±è´¥ |

### é™çº§ç­–ç•¥

#### R2: Câ†’Rustè½¬æ¢é£é™©ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

**Phase 1ï¼ˆMVPï¼‰ - å½“å‰é˜¶æ®µï¼š**
- âœ… ç”ŸæˆRustè¿ç§»å»ºè®®å’Œç¤ºä¾‹ä»£ç 
- âœ… ä¸è‡ªåŠ¨ä¿®æ”¹åŸä»£ç 
- âœ… æä¾›ç±»å‹æ˜ å°„å’Œè¿ç§»æ­¥éª¤
- ğŸ“Š é£é™©ï¼šä½
- â±ï¸  æ—¶é—´ï¼š4å¤©

**Phase 2ï¼ˆå¯é€‰ï¼‰ï¼š**
- âš ï¸  ç®€å•å‡½æ•°è‡ªåŠ¨è½¬æ¢
- âš ï¸  éœ€è¦100+æµ‹è¯•ç”¨ä¾‹éªŒè¯
- ğŸ“Š é£é™©ï¼šé«˜
- â±ï¸  é¢å¤–æ—¶é—´ï¼š+3å¤©

**è§¦å‘Phase 2æ¡ä»¶ï¼š**
- å‰ç½®é˜¶æ®µæå‰å®Œæˆ
- æœ‰é¢å¤–3å¤©ä»¥ä¸Šæ—¶é—´
- æµ‹è¯•å‡†ç¡®ç‡ > 80%

**é™çº§è§¦å‘ï¼š**
- å‡†ç¡®ç‡ < 70%
- æ—¶é—´ä¸è¶³
- è¯­ä¹‰éªŒè¯å¤±è´¥

---

## ğŸ“ˆ é‡Œç¨‹ç¢‘ä¸äº¤ä»˜è®¡åˆ’

### å…³é”®é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | æ—¥æœŸï¼ˆç›¸å¯¹ï¼‰ | äº¤ä»˜ç‰© | æˆåŠŸæ ‡å‡† |
|--------|-------------|--------|---------|
| **M0: é¡¹ç›®å¯åŠ¨** | Day 0 | é¡¹ç›®éª¨æ¶ã€ç¯å¢ƒé…ç½® | æ„å»ºæˆåŠŸï¼ŒPOCé€šè¿‡ |
| **M1: CLIæ¡†æ¶å®Œæˆ** | Day 7 | å¯æ‰§è¡Œçš„CLIå·¥å…· | æ‰€æœ‰å‘½ä»¤å¯ç”¨ |
| **M2: é™æ€åˆ†æå¯ç”¨** | Day 15 | é›†æˆClangå’ŒSemgrep | åˆ†æbzip2æˆåŠŸ |
| **M3: AIå¢å¼ºå®Œæˆ** | Day 22 | AIå»ºè®®ç”Ÿæˆ | AI APIæˆåŠŸç‡ > 95% |
| **M4: æ ¸å¿ƒåŠŸèƒ½å®Œæˆ** | Day 32 | MVPç‰ˆæœ¬ | æ‰€æœ‰P0åŠŸèƒ½å®Œæˆ |
| **M5: æ€§èƒ½ä¼˜åŒ–å®Œæˆ** | Day 37 | ä¼˜åŒ–ç‰ˆæœ¬ | æ€§èƒ½è¾¾æ ‡ |
| **M6: é¡¹ç›®äº¤ä»˜** | Day 40 | å®Œæ•´ç³»ç»Ÿ + æ–‡æ¡£ + Demo | éªŒæ”¶é€šè¿‡ |

### æ¯å‘¨äº¤ä»˜è®¡åˆ’

**Week 1ï¼ˆDay 1-7ï¼‰ï¼š** åŸºç¡€æ¡†æ¶
- âœ… é¡¹ç›®åˆå§‹åŒ–
- âœ… CLIæ¡†æ¶
- âœ… é…ç½®ç®¡ç†
- ğŸ“¦ äº¤ä»˜ï¼šå¯è¿è¡Œçš„CLIå·¥å…·

**Week 2ï¼ˆDay 8-14ï¼‰ï¼š** é™æ€åˆ†æ
- âœ… ä»£ç æ‰«æ
- âœ… Clangé›†æˆ
- âœ… Semgrepé›†æˆ
- ğŸ“¦ äº¤ä»˜ï¼šé™æ€åˆ†æå¼•æ“

**Week 3ï¼ˆDay 15-21ï¼‰ï¼š** AIå¢å¼º
- âœ… LLMå®¢æˆ·ç«¯
- âœ… Promptå·¥ç¨‹
- âœ… æ··åˆå†³ç­–
- ğŸ“¦ äº¤ä»˜ï¼šAIå¢å¼ºåˆ†æ

**Week 4ï¼ˆDay 22-28ï¼‰ï¼š** ä»£ç ç”Ÿæˆ
- âœ… ä¿®å¤å»ºè®®ç”Ÿæˆ
- âœ… Rustè¿ç§»å»ºè®®
- ğŸ“¦ äº¤ä»˜ï¼šä»£ç ç”Ÿæˆæ¨¡å—

**Week 5ï¼ˆDay 29-35ï¼‰ï¼š** æŠ¥å‘Šä¸ä¼˜åŒ–
- âœ… æŠ¥å‘Šç”Ÿæˆ
- âœ… æ€§èƒ½ä¼˜åŒ–
- âœ… æµ‹è¯•å®Œå–„
- ğŸ“¦ äº¤ä»˜ï¼šä¼˜åŒ–ç‰ˆæœ¬

**Week 6ï¼ˆDay 36-40ï¼‰ï¼š** éƒ¨ç½²ä¸äº¤ä»˜
- âœ… Dockerå®¹å™¨åŒ–
- âœ… æ–‡æ¡£ç¼–å†™
- âœ… Demoå‡†å¤‡
- ğŸ“¦ äº¤ä»˜ï¼šå®Œæ•´ç³»ç»Ÿ

---

## ğŸ“Š è¿›åº¦è·Ÿè¸ª

### KPIæŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | ç›‘æ§æ–¹å¼ |
|------|------|---------|
| åŠŸèƒ½å®Œæˆåº¦ | > 95% P0åŠŸèƒ½ | éœ€æ±‚è·Ÿè¸ªè¡¨ |
| ä»£ç è´¨é‡ | æµ‹è¯•è¦†ç›–ç‡ > 80% | JaCoCoæŠ¥å‘Š |
| æ€§èƒ½è¾¾æ ‡ç‡ | 100% | åŸºå‡†æµ‹è¯• |
| æ–‡æ¡£å®Œæ•´æ€§ | 100% | æ–‡æ¡£æ¸…å• |
| Demoå‡†å¤‡åº¦ | 100% | åŠŸèƒ½æ¼”ç¤º |

### è´¨é‡é—¨ç¦

**é˜¶æ®µå®Œæˆæ ‡å‡†ï¼š**
- [ ] æ‰€æœ‰éªŒæ”¶æ ‡å‡†é€šè¿‡
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] ä»£ç å®¡æŸ¥å®Œæˆ
- [ ] åŠŸèƒ½æ¼”ç¤ºé€šè¿‡
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ

**é¡¹ç›®äº¤ä»˜æ ‡å‡†ï¼š**
- [ ] æ‰€æœ‰P0åŠŸèƒ½å®Œæˆ
- [ ] P1åŠŸèƒ½ > 80%å®Œæˆ
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- [ ] æ–‡æ¡£å®Œæ•´
- [ ] Demoå¯æ¼”ç¤º
- [ ] Dockeré•œåƒå¯ç”¨

---

## ğŸ¯ èµ„æºè§„åˆ’

### äººåŠ›éœ€æ±‚

| è§’è‰² | å·¥ä½œé‡ | ä¸»è¦èŒè´£ |
|------|--------|---------|
| æ ¸å¿ƒå¼€å‘è€… | å…¨èŒ | æ¶æ„è®¾è®¡ã€æ ¸å¿ƒæ¨¡å—å¼€å‘ |
| æµ‹è¯•å·¥ç¨‹å¸ˆ | å…¼èŒï¼ˆWeek 5-6ï¼‰ | æµ‹è¯•ç”¨ä¾‹ç¼–å†™ã€è´¨é‡ä¿è¯ |
| æ–‡æ¡£å·¥ç¨‹å¸ˆ | å…¼èŒï¼ˆWeek 6ï¼‰ | ç”¨æˆ·æ–‡æ¡£ã€æŠ€æœ¯æ–‡æ¡£ |

### å·¥å…·ä¸èµ„æº

| èµ„æº | ç”¨é€” | æˆæœ¬ |
|------|------|------|
| OpenAI API | AIåˆ†æ | $50-100 |
| å¼€å‘ç¯å¢ƒ | Java 17, Maven, Docker | å…è´¹ |
| CI/CD | GitHub Actions | å…è´¹ |
| æ–‡æ¡£å¹³å° | Markdown + GitHub Pages | å…è´¹ |

---

## ğŸ” è´¨é‡ä¿è¯ç­–ç•¥

### æµ‹è¯•ç­–ç•¥

**å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡ > 80%ï¼‰ï¼š**
- CLIå‘½ä»¤è§£ææµ‹è¯•
- é…ç½®ç®¡ç†æµ‹è¯•
- é™æ€åˆ†æå¼•æ“æµ‹è¯•
- AIå®¢æˆ·ç«¯æµ‹è¯•
- æŠ¥å‘Šç”Ÿæˆæµ‹è¯•

**é›†æˆæµ‹è¯•ï¼š**
- CLI â†’ åˆ†æå¼•æ“ â†’ æŠ¥å‘Šç”Ÿæˆ
- é™æ€åˆ†æ â†’ AIåˆ†æ â†’ å†³ç­–å¼•æ“
- å¢é‡åˆ†ææµç¨‹

**E2Eæµ‹è¯•ï¼š**
- bzip2å®Œæ•´åˆ†ææµç¨‹
- æŠ¥å‘Šç”Ÿæˆæµç¨‹
- Dockerå®¹å™¨è¿è¡Œ

**æ€§èƒ½æµ‹è¯•ï¼š**
- 1K LOCåˆ†ææ—¶é—´
- 10K LOCåˆ†ææ—¶é—´
- 100K LOCå¢é‡åˆ†ææ—¶é—´
- å†…å­˜ä½¿ç”¨æµ‹è¯•

### ä»£ç å®¡æŸ¥

**å®¡æŸ¥æ¸…å•ï¼š**
- [ ] ä»£ç é£æ ¼ç¬¦åˆè§„èŒƒ
- [ ] å¼‚å¸¸å¤„ç†å®Œå–„
- [ ] æ—¥å¿—è®°å½•åˆç†
- [ ] æ€§èƒ½æ— æ˜æ˜¾é—®é¢˜
- [ ] å®‰å…¨éšæ‚£æ’æŸ¥
- [ ] æµ‹è¯•è¦†ç›–å……åˆ†

---

## ğŸ“š é™„å½•

### A. æŠ€æœ¯æ ˆæ¸…å•

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| è¯­è¨€ | Java | 17 | ä¸»è¦å¼€å‘è¯­è¨€ |
| æ„å»º | Maven | 3.9+ | ä¾èµ–ç®¡ç†ä¸æ„å»º |
| CLI | Picocli | 4.7.5 | å‘½ä»¤è¡Œæ¡†æ¶ |
| HTTP | OkHttp | 4.12.0 | AI APIè°ƒç”¨ |
| JSON | Gson | 2.10.1 | JSONå¤„ç† |
| æ¨¡æ¿ | Freemarker | 2.3.32 | æŠ¥å‘Šæ¨¡æ¿ |
| æ—¥å¿— | Logback | 1.4.14 | æ—¥å¿—æ¡†æ¶ |
| æµ‹è¯• | JUnit 5 | 5.10.1 | å•å…ƒæµ‹è¯• |
| é™æ€åˆ†æ | Clang | 14+ | C/C++åˆ†æ |
| é™æ€åˆ†æ | Semgrep | latest | è§„åˆ™å¼•æ“ |
| å®¹å™¨ | Docker | 20+ | å®¹å™¨åŒ–éƒ¨ç½² |

### B. é…ç½®ç¤ºä¾‹

è¯¦è§é˜¶æ®µ1æŠ€æœ¯æ–¹æ¡ˆä¸­çš„`config.yml`ç¤ºä¾‹ã€‚

### C. å‚è€ƒèµ„æº

- [Picocliæ–‡æ¡£](https://picocli.info/)
- [Clangé™æ€åˆ†æå™¨](https://clang.llvm.org/docs/ClangStaticAnalyzer.html)
- [Semgrepæ–‡æ¡£](https://semgrep.dev/docs/)
- [OpenAI APIæ–‡æ¡£](https://platform.openai.com/docs/)
- [Freemarkeræ–‡æ¡£](https://freemarker.apache.org/)

---

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|---------|------|
| 1.0 | 2025-10-XX | åˆå§‹ç‰ˆæœ¬ | Original |
| 2.0 | 2025-10-17 | è¯¦ç»†é˜¶æ®µè§„åˆ’ï¼Œé£é™©ç®¡ç†ï¼Œé™çº§ç­–ç•¥ | Claude |

---

**æœ¬æ–‡æ¡£ä¸ºè¯¦ç»†çš„é˜¶æ®µæ€§å¼€å‘è®¡åˆ’ä¹¦ï¼ŒåŸºäºåŸå§‹éœ€æ±‚åˆ†æåˆ¶å®šã€‚å»ºè®®æ ¹æ®å®é™…å¼€å‘è¿›åº¦åŠ¨æ€è°ƒæ•´ã€‚**
